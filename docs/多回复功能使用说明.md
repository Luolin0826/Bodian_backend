# è¯æœ¯åº“"ä¸€é—®å¤šç­”"åŠŸèƒ½ä½¿ç”¨è¯´æ˜

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°
è¯æœ¯åº“ç°åœ¨æ”¯æŒ"ä¸€é—®å¤šç­”"åŠŸèƒ½ï¼Œæ¯ä¸ªé—®é¢˜åœºæ™¯å¯ä»¥å¯¹åº”æœ€å¤š5ä¸ªä¸åŒçš„å›å¤ï¼Œè®©è¯æœ¯å†…å®¹æ›´åŠ ä¸°å¯Œå’Œçµæ´»ã€‚

## ğŸ†• æ–°å¢å­—æ®µè¯´æ˜

### æ•°æ®åº“å­—æ®µ
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `answers` | JSON | å¤šä¸ªå›å¤å†…å®¹çš„JSONæ•°ç»„ |
| `answer_count` | INT | å®é™…å›å¤æ•°é‡ |
| `recommended_answer_index` | INT | æ¨èå›å¤çš„ç´¢å¼•(0-based) |

### APIè¿”å›æ•°æ®
```json
{
  "id": 1,
  "question": "å¦‚ä½•å‡†å¤‡ç”µç½‘è€ƒè¯•ï¼Ÿ",
  "answer": "å»ºè®®å…ˆäº†è§£è€ƒè¯•å¤§çº²...",  // ä¸»å›å¤ï¼ˆå…¼å®¹æ€§ï¼‰
  "answers": [
    "å»ºè®®å…ˆäº†è§£è€ƒè¯•å¤§çº²ï¼Œåˆ¶å®šå­¦ä¹ è®¡åˆ’",
    "æ¨èè´­ä¹°å®˜æ–¹æ•™æï¼Œå¤šåšçœŸé¢˜ç»ƒä¹ ", 
    "å¯ä»¥æŠ¥ååŸ¹è®­ç­ï¼Œç³»ç»Ÿæ€§å­¦ä¹ ",
    "å»ºè®®å…³æ³¨æˆ‘ä»¬çš„å…¬ä¼—å·è·å–æœ€æ–°èµ„æ–™"
  ],
  "answer_count": 4,
  "recommended_answer_index": 0
}
```

## ğŸ“š APIæ¥å£è¯´æ˜

### 1. åˆ›å»ºè¯æœ¯ï¼ˆæ”¯æŒå¤šå›å¤ï¼‰
**POST** `/api/v1/scripts`

```json
{
  "question": "å¦‚ä½•å‡†å¤‡ç”µç½‘è€ƒè¯•ï¼Ÿ",
  "answers": [
    "å»ºè®®å…ˆäº†è§£è€ƒè¯•å¤§çº²ï¼Œåˆ¶å®šå­¦ä¹ è®¡åˆ’",
    "æ¨èè´­ä¹°å®˜æ–¹æ•™æï¼Œå¤šåšçœŸé¢˜ç»ƒä¹ "
  ],
  "recommended_answer_index": 0,
  "category_id": 1
}
```

### 2. æ›´æ–°è¯æœ¯ï¼ˆæ”¯æŒå¤šå›å¤ï¼‰
**PUT** `/api/v1/scripts/{id}`

```json
{
  "answers": [
    "å»ºè®®å…ˆäº†è§£è€ƒè¯•å¤§çº²ï¼Œåˆ¶å®šå­¦ä¹ è®¡åˆ’",
    "æ¨èè´­ä¹°å®˜æ–¹æ•™æï¼Œå¤šåšçœŸé¢˜ç»ƒä¹ ",
    "å¯ä»¥æŠ¥ååŸ¹è®­ç­ï¼Œç³»ç»Ÿæ€§å­¦ä¹ "
  ],
  "recommended_answer_index": 1
}
```

### 3. æ·»åŠ æ–°å›å¤
**POST** `/api/v1/scripts/{id}/answers`

```json
{
  "answer": "å»ºè®®å…³æ³¨æˆ‘ä»¬çš„å…¬ä¼—å·è·å–æœ€æ–°èµ„æ–™"
}
```

### 4. æ›´æ–°æŒ‡å®šå›å¤
**PUT** `/api/v1/scripts/{id}/answers/{index}`

```json
{
  "answer": "æ›´æ–°åçš„å›å¤å†…å®¹"
}
```

### 5. åˆ é™¤æŒ‡å®šå›å¤
**DELETE** `/api/v1/scripts/{id}/answers/{index}`

### 6. è®¾ç½®æ¨èå›å¤
**PUT** `/api/v1/scripts/{id}/recommend/{index}`

## ğŸ”„ å‘åå…¼å®¹æ€§

### ç°æœ‰APIç»§ç»­å·¥ä½œ
- æ‰€æœ‰ç°æœ‰çš„APIæ¥å£éƒ½ä¿æŒä¸å˜
- ç°æœ‰æ•°æ®è‡ªåŠ¨è¿ç§»åˆ°æ–°ç»“æ„
- `answer` å­—æ®µä¿ç•™ä½œä¸ºä¸»å›å¤

### å…¼å®¹å•å›å¤æ›´æ–°
```json
// æ—§ç‰ˆæœ¬æ–¹å¼ä¾ç„¶æ”¯æŒ
{
  "answer": "å•ä¸ªå›å¤å†…å®¹"
}
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å¤šå›å¤åœºæ™¯
1. **ä¸åŒè§’åº¦å›ç­”**: åŒä¸€é—®é¢˜çš„ä¸åŒåˆ‡å…¥ç‚¹
2. **éš¾åº¦åˆ†å±‚**: ç®€å•ç‰ˆã€è¯¦ç»†ç‰ˆå›å¤
3. **åœºæ™¯é€‚é…**: ä¸åŒç”¨æˆ·ç¾¤ä½“çš„å›å¤
4. **A/Bæµ‹è¯•**: æµ‹è¯•ä¸åŒå›å¤çš„æ•ˆæœ

### æ¨èå›å¤è®¾ç½®
- è®¾ç½®æœ€å¸¸ç”¨æˆ–æ•ˆæœæœ€å¥½çš„å›å¤ä¸ºæ¨è
- å‰ç«¯å¯ä¼˜å…ˆå±•ç¤ºæ¨èå›å¤
- ä¾¿äºç»Ÿè®¡åˆ†æå’Œæ•ˆæœè¯„ä¼°

## âš ï¸ æ³¨æ„äº‹é¡¹

### é™åˆ¶è¯´æ˜
- æ¯ä¸ªé—®é¢˜æœ€å¤šæ”¯æŒ5ä¸ªå›å¤
- è‡³å°‘éœ€è¦ä¿ç•™1ä¸ªå›å¤
- æ¨èç´¢å¼•èŒƒå›´: 0 åˆ° (å›å¤æ•°é‡-1)

### æ•°æ®è¿ç§»
æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬ `add_multiple_answers_migration.sql` åï¼š
- ç°æœ‰ `answer` å­—æ®µå†…å®¹è‡ªåŠ¨è¿ç§»åˆ° `answers[0]`
- `answer_count` è®¾ä¸º 1
- `recommended_answer_index` è®¾ä¸º 0

## ğŸš€ å‰ç«¯é›†æˆå»ºè®®

### å±•ç¤ºç•Œé¢
```javascript
// å±•ç¤ºå¤šä¸ªå›å¤é€‰é¡¹
script.answers.forEach((answer, index) => {
  const isRecommended = index === script.recommended_answer_index;
  // æ¸²æŸ“å›å¤é€‰é¡¹ï¼Œæ ‡æ³¨æ¨èé¡¹
});
```

### åˆ›å»ºç•Œé¢
```javascript
// æ”¯æŒåŠ¨æ€æ·»åŠ /åˆ é™¤å›å¤
const answers = ['å›å¤1', 'å›å¤2'];  // æœ€å¤š5ä¸ª
const data = {
  question: 'é—®é¢˜å†…å®¹',
  answers: answers,
  recommended_answer_index: 0
};
```

## ğŸ“ˆ ç»Ÿè®¡åˆ†ææ‰©å±•
æœªæ¥å¯åŸºäºå¤šå›å¤åŠŸèƒ½æ‰©å±•ï¼š
- å„å›å¤ä½¿ç”¨é¢‘ç‡ç»Ÿè®¡
- å›å¤æ•ˆæœå¯¹æ¯”åˆ†æ
- æ™ºèƒ½æ¨èä¼˜åŒ–
- ç”¨æˆ·åå¥½åˆ†æ